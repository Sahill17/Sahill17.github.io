<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Switch and Defer Statements | Sahil Rathod</title><meta name=keywords content="go-series,golang"><meta name=description content="In programming, switch and defer statements are control flow mechanisms with distinct purposes."><meta name=author content><link rel=canonical href=https://sahill17.github.io/post/switch-and-defer-statements/><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://sahill17.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://sahill17.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://sahill17.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://sahill17.github.io/apple-touch-icon.png><link rel=mask-icon href=https://sahill17.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://sahill17.github.io/post/switch-and-defer-statements/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://sahill17.github.io/post/switch-and-defer-statements/"><meta property="og:site_name" content="Sahil Rathod"><meta property="og:title" content="Switch and Defer Statements"><meta property="og:description" content="In programming, switch and defer statements are control flow mechanisms with distinct purposes."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-12-22T15:51:41+05:30"><meta property="article:modified_time" content="2024-12-22T15:51:41+05:30"><meta property="article:tag" content="Go-Series"><meta property="article:tag" content="Golang"><meta property="og:image" content="https://sahill17.github.io/images/golang.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://sahill17.github.io/images/golang.jpg"><meta name=twitter:title content="Switch and Defer Statements"><meta name=twitter:description content="In programming, switch and defer statements are control flow mechanisms with distinct purposes."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://sahill17.github.io/post/"},{"@type":"ListItem","position":2,"name":"Switch and Defer Statements","item":"https://sahill17.github.io/post/switch-and-defer-statements/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Switch and Defer Statements","name":"Switch and Defer Statements","description":"In programming, switch and defer statements are control flow mechanisms with distinct purposes.","keywords":["go-series","golang"],"articleBody":"In our previous learning, we have discussed functions and loops. Here we will be talking about switch and defer statements. Let’s start with switch cases..\nSwitch statements are a way to compare multiple options and values together. They are similar to if-else statements but are more concise and readable\npackage main import \"fmt\" func main() { var color string fmt.Println(\"What color is the sky??\") switch fmt.Scan(\u0026color); color { case \"red\": fmt.Println(\"Evening\") case \"blue\": fmt.Println(\"Day\") case \"pink\": fmt.Println(\"Evening\") case \"black\": fmt.Println(\"Night\") default: fmt.Println(\"Sky is what???\") } } Did you notice that the Go break statement is not required at the end of a case. break statement is implicit in Go.\n▶ go run switch.go What color is the sky?? red Evening If you do want a case to fall through to the next case, you can use the fallthrough keyword.\npackage main import \"fmt\" func main() { var color string fmt.Println(\"What color is the sky??\") switch fmt.Scan(\u0026color); color { case \"blue\": fmt.Println(\"Day\") case \"red\": fallthrough case \"pink\": fmt.Println(\"Evening\") case \"black\": fmt.Println(\"Night\") default: fmt.Println(\"Sky is what???\") } } ▶ go run switch.go What color is the sky?? red Evening default is the case that runs if none of the other cases match.\nswitch with no condition is same as switch true\npackage main import ( \"fmt\" \"time\" ) func main() { t := time.Now() switch { case t.Hour() \u003c 12: fmt.Println(\"Good morning.\") case t.Hour() \u003c 17: fmt.Println(\"Good afternoon.\") default: fmt.Println(\"Good evening.\") } } ▶ go run switch.go Good afternoon. Defer statement defer keyword allows a function to be executed automatically just before its enclosing function returns. The deferred call’s arguments are evaluated immediately, but the function call is not executed until the surrounding function returns.\ndeferred functions are mostly used for clean-up tasks or for closing connections.\npackage main import ( \"fmt\" \"time\" ) func main() { fmt.Println(\"You need rest.\") start := time.Now() defer sleeping(start) time.Sleep(5 * time.Second) fmt.Println(\"You went to sleep.\") } func sleeping(sleep time.Time) { fmt.Printf(\"You slpet for %f seconds.\", time.Since(sleep).Seconds()) } ▶ go run defer.go You need rest. You went to sleep. You slpet for 5.001066 seconds. Stacking defer Deferred function calls are pushed onto a stack. When a function returns, its deferred calls are executed in LIFO (last-in-first-out) order.\npackage main import \"fmt\" func main() { fmt.Println(\"counting\") for i := 0; i \u003c 5; i++ { defer fmt.Println(i) } fmt.Println(\"done\") } ▶ go run stackdefer.go counting done 4 3 2 1 0 Evaluation of arguments The arguments of a deferred function are evaluated when the defer statement is executed and not when the actual function call is done. you will understand this better with below example:\npackage main import \"fmt\" func main() { a := 5 defer inc(a) a++ fmt.Printf(\"a --\u003e %v\\n\", a) } func inc(a int) { fmt.Printf(\"a -\u003e %v\", a) } ▶ go run defer2.go a --\u003e 6 a -\u003e 5 defer statements are not restricted to only functions; you can defer a method as well.\nI guess we will wrap it up here. Stay tuned for the next learnings.\nSee you soon! Thanks for joining our journey to learn Go (Golang)!\n","wordCount":"516","inLanguage":"en","image":"https://sahill17.github.io/images/golang.jpg","datePublished":"2024-12-22T15:51:41+05:30","dateModified":"2024-12-22T15:51:41+05:30","mainEntityOfPage":{"@type":"WebPage","@id":"https://sahill17.github.io/post/switch-and-defer-statements/"},"publisher":{"@type":"Organization","name":"Sahil Rathod","logo":{"@type":"ImageObject","url":"https://sahill17.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://sahill17.github.io/ accesskey=h title="Sahil Rathod (Alt + H)">Sahil Rathod</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://sahill17.github.io/ title=Home><span>Home</span></a></li><li><a href=https://sahill17.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://sahill17.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://sahill17.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Switch and Defer Statements</h1><div class=post-meta><span title='2024-12-22 15:51:41 +0530 +0530'>December 22, 2024</span>&nbsp;·&nbsp;3 min</div></header><figure class=entry-cover><img loading=eager srcset='https://sahill17.github.io/images/golang_hu_a0184712a25b07b4.jpg 360w,https://sahill17.github.io/images/golang_hu_7582ddcbd288e1bf.jpg 480w,https://sahill17.github.io/images/golang_hu_da2fb1d7034afb0d.jpg 720w,https://sahill17.github.io/images/golang_hu_d66576e85b2ff2f2.jpg 1080w,https://sahill17.github.io/images/golang_hu_f20eb7611a3c112d.jpg 1500w,https://sahill17.github.io/images/golang.jpg 5184w' src=https://sahill17.github.io/images/golang.jpg sizes="(min-width: 768px) 720px, 100vw" width=5184 height=3456 alt="Could not load image"></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#defer-statement aria-label="Defer statement">Defer statement</a></li><li><a href=#stacking-defer aria-label="Stacking defer">Stacking defer</a></li><li><a href=#evaluation-of-arguments aria-label="Evaluation of arguments">Evaluation of arguments</a></li><li><a href=#see-you-soon aria-label="See you soon!">See you soon!</a></li></ul></div></details></div><div class=post-content><p>In our previous learning, we have discussed functions and loops. Here we will be talking about <code>switch</code> and <code>defer</code> statements. Let&rsquo;s start with switch cases..</p><p>Switch statements are a way to compare multiple options and values together. They are similar to if-else statements but are more concise and readable</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>color</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;What color is the sky??&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>switch</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Scan</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>color</span>); <span style=color:#a6e22e>color</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;red&#34;</span>:
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Evening&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;blue&#34;</span>:
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Day&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;pink&#34;</span>:
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Evening&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;black&#34;</span>:
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Night&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>default</span>:
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Sky is what???&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Did you notice that the Go <code>break</code> statement is not required at the end of a <code>case</code>. <code>break</code> statement is implicit in Go.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>▶ go run switch.go
</span></span><span style=display:flex><span>What color is the sky??
</span></span><span style=display:flex><span>red
</span></span><span style=display:flex><span>Evening
</span></span></code></pre></div><p>If you <em>do</em> want a <code>case</code> to fall through to the next <code>case</code>, you can use the <code>fallthrough</code> keyword.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>color</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;What color is the sky??&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>switch</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Scan</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>color</span>); <span style=color:#a6e22e>color</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;blue&#34;</span>:
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Day&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;red&#34;</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>fallthrough</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;pink&#34;</span>:
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Evening&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;black&#34;</span>:
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Night&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>default</span>:
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Sky is what???&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>▶ go run switch.go
</span></span><span style=display:flex><span>What color is the sky??
</span></span><span style=display:flex><span>red
</span></span><span style=display:flex><span>Evening
</span></span></code></pre></div><p><code>default</code> is the case that runs if none of the other cases match.</p><p><code>switch</code> with no condition is same as <code>switch true</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>t</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>switch</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Hour</span>() &lt; <span style=color:#ae81ff>12</span>:
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Good morning.&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Hour</span>() &lt; <span style=color:#ae81ff>17</span>:
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Good afternoon.&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>default</span>:
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Good evening.&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>▶ go run switch.go
</span></span><span style=display:flex><span>Good afternoon.
</span></span></code></pre></div><h3 id=defer-statement>Defer statement<a hidden class=anchor aria-hidden=true href=#defer-statement>#</a></h3><p><code>defer</code> keyword allows a function to be executed automatically <em>just before</em> its enclosing function returns. The deferred call&rsquo;s arguments are evaluated immediately, but the function call is not executed until the surrounding function returns.</p><p><code>deferred functions</code> are mostly used for clean-up tasks or for closing connections.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;You need rest.&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>start</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>sleeping</span>(<span style=color:#a6e22e>start</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Sleep</span>(<span style=color:#ae81ff>5</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Second</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;You went to sleep.&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>sleeping</span>(<span style=color:#a6e22e>sleep</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Time</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;You slpet for %f seconds.&#34;</span>, <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Since</span>(<span style=color:#a6e22e>sleep</span>).<span style=color:#a6e22e>Seconds</span>())
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>▶ go run defer.go
</span></span><span style=display:flex><span>You need rest.
</span></span><span style=display:flex><span>You went to sleep.
</span></span><span style=display:flex><span>You slpet <span style=color:#66d9ef>for</span> 5.001066 seconds.
</span></span></code></pre></div><h3 id=stacking-defer>Stacking defer<a hidden class=anchor aria-hidden=true href=#stacking-defer>#</a></h3><p>Deferred function calls are pushed onto a stack. When a function returns, its deferred calls are executed in LIFO (last-in-first-out) order.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;counting&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; <span style=color:#ae81ff>5</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>i</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;done&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>▶ go run stackdefer.go
</span></span><span style=display:flex><span>counting
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>
</span></span></code></pre></div><h3 id=evaluation-of-arguments>Evaluation of arguments<a hidden class=anchor aria-hidden=true href=#evaluation-of-arguments>#</a></h3><p>The arguments of a deferred function are evaluated when the <code>defer</code> statement is executed and not when the actual function call is done. you will understand this better with below example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>a</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>inc</span>(<span style=color:#a6e22e>a</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>a</span><span style=color:#f92672>++</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;a --&gt; %v\n&#34;</span>, <span style=color:#a6e22e>a</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>inc</span>(<span style=color:#a6e22e>a</span> <span style=color:#66d9ef>int</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;a -&gt; %v&#34;</span>, <span style=color:#a6e22e>a</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>▶ go run defer2.go
</span></span><span style=display:flex><span>a --&gt; <span style=color:#ae81ff>6</span>
</span></span><span style=display:flex><span>a -&gt; <span style=color:#ae81ff>5</span>
</span></span></code></pre></div><p><code>defer</code> statements are not restricted to only functions; you can defer a method as well.</p><p>I guess we will wrap it up here. Stay tuned for the next learnings.</p><h3 id=see-you-soon>See you soon!<a hidden class=anchor aria-hidden=true href=#see-you-soon>#</a></h3><p>Thanks for joining our journey to learn Go (Golang)!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://sahill17.github.io/tags/go-series/>Go-Series</a></li><li><a href=https://sahill17.github.io/tags/golang/>Golang</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://sahill17.github.io/>Sahil Rathod</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>